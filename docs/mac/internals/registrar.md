---
title: Xamarin. Mac レジストラー
description: このドキュメントでは、Xamarin. Mac レジストラーとその動的、静的、および部分静的 (ハイブリッド) の使用構成の目的について説明します。
ms.prod: xamarin
ms.assetid: 7CAAA6B7-D654-4AD3-BAEC-9DD01210978A
ms.technology: xamarin-mac
author: conceptdev
ms.author: crdun
ms.date: 11/10/2017
ms.openlocfilehash: d44f445b0c3bcc6fd498372f6cdf3e20be39d5b5
ms.sourcegitcommit: 933de144d1fbe7d412e49b743839cae4bfcac439
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/04/2019
ms.locfileid: "70290093"
---
# <a name="xamarinmac-registrar"></a>Xamarin. Mac レジストラー

_このドキュメントでは、Xamarin. Mac レジストラーとその異なる使用構成の目的について説明します。_

## <a name="overview"></a>概要

Xamarin. Mac はマネージ (.NET) ワールドと Cocoa のランタイムの間のギャップを橋渡しします。これにより、マネージクラスはアンマネージドの C クラスを呼び出し、イベントが発生したときにコールバックできます。 この "マジック" を検査するために必要な作業はレジストラーによって処理され、一般にはビューでは非表示になります。

この登録には、特にアプリケーションの起動時に発生するパフォーマンスへの影響があります。また、"内部" にあることを理解しておくと役立つ場合があります。

## <a name="configurations"></a>構成

起動時に登録されているレジストラーのジョブは、基本的に、次の2つのカテゴリに分けることができます。

- NSObject から派生したすべてのマネージクラスをスキャンし、目的の C ランタイムに公開される項目のリストを収集します。
- この情報を目的の C ランタイムに登録します。

時間の経過と共に、さまざまなユースケースに対応するために3つのレジスタ構成が作成されています。 それぞれのビルドと実行時の結果は、次のように異なります。

- **動的レジストラー** –起動時に .net リフレクションを使用して、読み込まれたすべての型をスキャンし、関連する項目の一覧を特定し、ネイティブランタイムに通知します。 このオプションを選択すると、ビルドにゼロ時間が追加されますが、起動時の計算には非常にコストがかかります (最大で数秒)。
- **静的レジストラー** –ビルド中に、登録する項目のセットを計算し、登録を処理するための目的の C コードを生成します。 このコードは、スタートアップ時に、すべての項目をすばやく登録するために呼び出されます。 ビルドに大幅な一時停止を追加しますが、アプリケーションの起動からかなりの時間を削減できます。
- **"部分的な" 静的**–新しい "ハイブリッド" アプローチであり、ほとんどの利点を活用できます。 **Xamarin**からのエクスポートは一定であるため、事前計算済みライブラリを保存して、の登録とリンクを処理します。 ユーザーライブラリの処理にはリフレクションを使用しますが、ユーザーライブラリでは、多くの場合、プラットフォームのバインドが非常に高速であることを示します。 Neglectable のビルド時間に影響を与え、動的な "コスト" の大部分を削減します。

現在、部分的な static はデバッグ構成の既定値であり、Release 構成の既定値は Static です。

いくつかのシナリオがあります。

- NSObject から派生したクラスを使用して起動後にプラグインが読み込まれました
- NSObject から派生する動的に作成されたクラスインスタンス

レジストラーは、開始時に何らかの型を登録する必要があることを認識できません。 メソッド`ObjCRuntime.Runtime.RegisterAssembly`は、他に考慮する型があることをレジストラーに通知するために用意されています。
